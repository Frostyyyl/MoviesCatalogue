<Window x:Class="WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Movie Catalogue" Height="600" Width="900">

    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- FILMY -->
        <StackPanel Grid.Column="0" Margin="10">

            <TextBlock Text="Filmy" FontSize="22" FontWeight="Bold" Margin="0 0 0 10"/>

            <!-- Wyszukiwanie -->
            <StackPanel Orientation="Horizontal" Margin="0 0 0 10">
                <TextBox Width="200" Text="{Binding MoviesVM.SearchText, UpdateSourceTrigger=PropertyChanged}" />
                <Button Content="Refresh" Command="{Binding MoviesVM.RefreshCommand}" Margin="8,0,0,0"/>
            </StackPanel>

            <!-- Przyciski -->
            <StackPanel Orientation="Horizontal" Margin="0 0 0 10">
                <Button Content="Add" Width="80" Margin="0 0 8 0" Command="{Binding MoviesVM.StartAddCommand}" />
                <Button Content="Edit" Width="80" Margin="0 0 8 0" Command="{Binding MoviesVM.StartEditCommand}" />
                <Button Content="Delete" Width="80" Command="{Binding MoviesVM.DeleteCommand}" />
            </StackPanel>

            <!-- Lista filmów -->
            <ListBox ItemsSource="{Binding MoviesVM.FilteredMovies}"
             SelectedItem="{Binding MoviesVM.SelectedMovie}"
             DisplayMemberPath="Title"
             Height="300"/>

            <!-- FORMULARZ EDYCJI/DODAWANIA -->
            <Border BorderBrush="Gray" BorderThickness="1" Padding="10" Margin="0 10 0 0"
            Visibility="{Binding MoviesVM.IsEditorVisible, Converter={StaticResource BoolToVisibility}}">

                <StackPanel>

                    <TextBlock Text="Edytor filmu" FontSize="16" FontWeight="Bold" Margin="0 0 0 10"/>

                    <TextBlock Text="Title:"/>
                    <TextBox Text="{Binding MoviesVM.EditorTitle, UpdateSourceTrigger=PropertyChanged}" />

                    <TextBlock Text="Year:" Margin="0 6 0 0"/>
                    <TextBox Text="{Binding MoviesVM.EditorYear, UpdateSourceTrigger=PropertyChanged}" />

                    <TextBlock Text="Genre:" Margin="0 6 0 0"/>
                    <ComboBox ItemsSource="{Binding MoviesVM.Genres}"
                      SelectedItem="{Binding MoviesVM.EditorGenre}" />

                    <TextBlock Text="Director:" Margin="0 6 0 0"/>
                    <ComboBox ItemsSource="{Binding MoviesVM.Directors}"
                      DisplayMemberPath="Name"
                      SelectedValuePath="Id"
                      SelectedValue="{Binding MoviesVM.EditorDirectorId}" />

                    <!-- Błędy -->
                    <TextBlock Text="{Binding MoviesVM.EditorError}" Foreground="Red" Margin="0 10 0 0"/>

                    <!-- SAVE / CANCEL -->
                    <StackPanel Orientation="Horizontal" Margin="0 10 0 0">
                        <Button Content="Save" Width="80" Margin="0 0 10 0" Command="{Binding MoviesVM.SaveCommand}" />
                        <Button Content="Cancel" Width="80" Command="{Binding MoviesVM.CancelCommand}" />
                    </StackPanel>

                </StackPanel>

            </Border>
        </StackPanel>

        <!-- REŻYSERZY -->
        <StackPanel Grid.Column="1" Margin="10">
            <TextBlock Text="Reżyserzy" FontSize="22" FontWeight="Bold" Margin="0 0 0 10"/>

            <StackPanel Orientation="Horizontal" Margin="0 0 0 10">
                <Button Content="Add" Command="{Binding DirectorsVM.AddCommand}" Width="80" Margin="0 0 8 0"/>
                <Button Content="Edit" Command="{Binding DirectorsVM.EditCommand}" Width="80" Margin="0 0 8 0"/>
                <Button Content="Delete" Command="{Binding DirectorsVM.DeleteCommand}" Width="80"/>
            </StackPanel>

            <ListBox ItemsSource="{Binding DirectorsVM.Directors}"
                     SelectedItem="{Binding DirectorsVM.SelectedDirector}"
                     DisplayMemberPath="Name"
                     Height="450"/>
        </StackPanel>

    </Grid>
</Window>
